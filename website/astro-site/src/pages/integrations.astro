---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
---

<BaseLayout title="Integrations | Empirica">
    <Header slot="header" />
    <Navigation slot="navigation" />
    <!-- Hero Section -->
    <section class=" text-white py-20">
        <div class="max-w-5xl mx-auto px-6">
            <h1 class="text-5xl font-bold mb-6">
                Integrations
            </h1>
            <p class="text-2xl text-emerald-200 mb-8">
                CLI, MCP, and Python API‚Äîthree ways to add epistemic self-awareness to your workflow
            </p>
            <p class="text-lg text-slate-300 max-w-3xl">
                Empirica offers three integration layers: a powerful CLI for interactive use, Model Context Protocol (MCP) for seamless IDE integration, and a comprehensive Python API for programmatic control. All three share the same underlying CASCADE workflow and storage architecture.
            </p>
        </div>
    </section>

    <!-- Three Integration Paths -->
    <section class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-12 text-center">
                Choose Your Integration
            </h2>

            <div class="grid md:grid-cols-3 gap-8 mb-12">
                <a href="#cli" class="group rounded-xl p-6 border-2 border-indigo-200 hover:border-indigo-400 transition-all hover:">
                    <div class="text-4xl mb-4">‚å®Ô∏è</div>
                    <h3 class="text-2xl font-bold text-white mb-3 group-hover:text-indigo-600 transition-colors">CLI</h3>
                    <p class="text-slate-300 mb-4">
                        Command-line interface for interactive sessions and automation
                    </p>
                    <div class="text-sm text-indigo-600 font-semibold">
                        Best for: Terminal users, scripts ‚Üí
                    </div>
                </a>

                <a href="#mcp" class="group rounded-xl p-6 border-2 border-cyan-200 hover:border-cyan-400 transition-all hover:">
                    <div class="text-4xl mb-4">üîå</div>
                    <h3 class="text-2xl font-bold text-white mb-3 group-hover:text-cyan-600 transition-colors">MCP</h3>
                    <p class="text-slate-300 mb-4">
                        Model Context Protocol for IDE and agent integrations
                    </p>
                    <div class="text-sm text-cyan-600 font-semibold">
                        Best for: Claude Desktop, Cline ‚Üí
                    </div>
                </a>

                <a href="#python" class="group rounded-xl p-6 border-2 border-green-200 hover:border-green-400 transition-all hover:">
                    <div class="text-4xl mb-4">üêç</div>
                    <h3 class="text-2xl font-bold text-white mb-3 group-hover:text-green-600 transition-colors">Python API</h3>
                    <p class="text-slate-300 mb-4">
                        Programmatic access for custom integrations and research
                    </p>
                    <div class="text-sm text-green-600 font-semibold">
                        Best for: Applications, research ‚Üí
                    </div>
                </a>
            </div>

            <div class=" rounded-xl p-6 text-center">
                <p class="text-slate-300">
                    <strong>All integrations use the same core:</strong> CASCADE workflow, triple storage (SQLite + Git + JSON), 13 epistemic vectors
                </p>
            </div>
        </div>
    </section>

    <!-- CLI Integration -->
    <section id="cli" class="py-20 ">
        <div class="max-w-5xl mx-auto px-6">
            <div class="flex items-center mb-6">
                <div class="text-5xl mr-4">‚å®Ô∏è</div>
                <div>
                    <h2 class="text-4xl font-bold text-white">CLI Interface</h2>
                    <p class="text-xl text-slate-400">Interactive sessions and automation</p>
                </div>
            </div>

            <div class="glass-card rounded-xl  p-8 mb-8">
                <h3 class="text-2xl font-bold text-white mb-4">Quick Start</h3>
                
                <div class="bg-slate-900 text-slate-300 rounded-lg p-6 font-mono text-sm mb-6">
                    <div class="text-cyan-400 mb-4"># Install Empirica</div>
                    <div>pip install empirica</div>
                    <div class="mt-4 text-cyan-400"># Create session</div>
                    <div>empirica session-create --ai-id myai</div>
                    <div class="mt-4 text-cyan-400"># Start CASCADE workflow</div>
                    <div>empirica preflight --session-id &lt;ID&gt; --prompt "Your task"</div>
                    <div class="mt-2">empirica check --session-id &lt;ID&gt; --confidence 0.7</div>
                    <div class="mt-2">empirica postflight --session-id &lt;ID&gt;</div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-white mb-3">Key Commands</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">session-create</code> - Start new session</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">preflight</code> - Initial assessment</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">check</code> - Gate decision</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">postflight</code> - Final assessment</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">goals-create</code> - Track complex work</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚Ä¢</span>
                                <span><code class="bg-slate-100 px-2 py-0.5 rounded">handoff-create</code> - Multi-agent coordination</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-white mb-3">Use Cases</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚úì</span>
                                <span>Interactive terminal sessions</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚úì</span>
                                <span>Shell scripts and automation</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚úì</span>
                                <span>CI/CD pipeline integration</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚úì</span>
                                <span>Quick debugging and exploration</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-indigo-600 mr-2">‚úì</span>
                                <span>Session management</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-indigo-50 to-purple-50 border-l-4 border-indigo-600 p-6 rounded-lg">
                <h4 class="font-semibold text-indigo-900 mb-2">Full Documentation</h4>
                <p class="text-indigo-800 mb-4">
                    Complete CLI reference with all commands, options, and examples
                </p>
                <a href="/developers/cli-interface.html" class="text-indigo-600 hover:text-indigo-700 font-semibold">
                    View CLI Documentation ‚Üí
                </a>
            </div>
        </div>
    </section>

    <!-- MCP Integration -->
    <section id="mcp" class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <div class="flex items-center mb-6">
                <div class="text-5xl mr-4">üîå</div>
                <div>
                    <h2 class="text-4xl font-bold text-white">MCP Integration</h2>
                    <p class="text-xl text-slate-400">Model Context Protocol for seamless IDE integration</p>
                </div>
            </div>

            <div class="glass-card rounded-xl  p-8 mb-8">
                <h3 class="text-2xl font-bold text-white mb-4">What is MCP?</h3>
                <p class="text-slate-300 mb-6">
                    Model Context Protocol is an open standard for connecting AI assistants to external tools and data sources. Empirica's MCP server exposes all CASCADE functionality as tool calls that Claude Desktop, Cline, and other MCP clients can invoke directly.
                </p>

                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-cyan-50 rounded-lg p-6">
                        <h4 class="font-semibold text-white mb-3">Supported Clients</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-center">
                                <span class="text-cyan-600 mr-2">‚úì</span>
                                <span><strong>Claude Desktop</strong> - Native integration</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-cyan-600 mr-2">‚úì</span>
                                <span><strong>Cline</strong> - VS Code extension</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-cyan-600 mr-2">‚úì</span>
                                <span><strong>Antigravity IDE</strong> - Full MCP support</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-cyan-600 mr-2">‚úì</span>
                                <span><strong>Custom clients</strong> - Any MCP-compatible tool</span>
                            </li>
                        </ul>
                    </div>

                    <div class="bg-teal-50 rounded-lg p-6">
                        <h4 class="font-semibold text-white mb-3">Available Tools</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>session_create</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>execute_preflight / submit_preflight_assessment</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>execute_check / submit_check_assessment</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>execute_postflight / submit_postflight_assessment</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>create_goal, add_subtask, complete_subtask</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>create_handoff_report, query_handoff_reports</span>
                            </li>
                            <li class="flex items-center">
                                <span class="text-teal-600 mr-2">‚Ä¢</span>
                                <span>edit_with_confidence (metacognitive editing)</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="bg-slate-900 text-slate-300 rounded-lg p-6 font-mono text-sm">
                    <div class="text-cyan-400 mb-4"># Example: Claude Desktop configuration</div>
                    <div>// Add to claude_desktop_config.json</div>
                    <div class="mt-2">{"{"}</div>
                    <div class="ml-4">"mcpServers": {"{"}</div>
                    <div class="ml-8">"empirica": {"{"}</div>
                    <div class="ml-12">"command": "uvx",</div>
                    <div class="ml-12">"args": ["empirica-mcp"]</div>
                    <div class="ml-8">{"}"}</div>
                    <div class="ml-4">{"}"}</div>
                    <div>{"}"}</div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-cyan-50 to-teal-50 border-l-4 border-cyan-600 p-6 rounded-lg">
                <h4 class="font-semibold text-cyan-900 mb-2">Setup Guide</h4>
                <p class="text-cyan-800 mb-4">
                    Step-by-step instructions for integrating Empirica with Claude Desktop, Cline, and other MCP clients
                </p>
                <a href="/mcp-integration.html" class="text-cyan-600 hover:text-cyan-700 font-semibold">
                    View MCP Setup Guide ‚Üí
                </a>
            </div>
        </div>
    </section>

    <!-- Python API -->
    <section id="python" class="py-20 ">
        <div class="max-w-5xl mx-auto px-6">
            <div class="flex items-center mb-6">
                <div class="text-5xl mr-4">üêç</div>
                <div>
                    <h2 class="text-4xl font-bold text-white">Python API</h2>
                    <p class="text-xl text-slate-400">Programmatic control for applications and research</p>
                </div>
            </div>

            <div class="glass-card rounded-xl  p-8 mb-8">
                <h3 class="text-2xl font-bold text-white mb-4">Direct API Access</h3>
                <p class="text-slate-300 mb-6">
                    The Python API provides complete programmatic access to all Empirica functionality. Perfect for building applications, conducting research, or integrating with custom workflows.
                </p>

                <div class="bg-slate-900 text-slate-300 rounded-lg p-6 font-mono text-sm mb-6">
                    <div class="text-cyan-400 mb-4"># Complete CASCADE workflow in Python</div>
                    <div>from empirica.data.session_database import SessionDatabase</div>
                    <div>from empirica.core.canonical.git_enhanced_reflex_logger import GitEnhancedReflexLogger</div>
                    <div class="mt-4 text-slate-500"># Create session</div>
                    <div>db = SessionDatabase()</div>
                    <div>session_id = db.create_session(ai_id="myai")</div>
                    <div class="mt-4 text-slate-500"># PREFLIGHT assessment</div>
                    <div>logger = GitEnhancedReflexLogger(session_id=session_id)</div>
                    <div>logger.add_checkpoint(</div>
                    <div class="ml-4">phase="PREFLIGHT",</div>
                    <div class="ml-4">vectors={"{"}{"'"}know{"'"}: 0.4, {"'"}uncertainty{"'"}: 0.6, ...{"}"},</div>
                    <div class="ml-4">reasoning="Initial assessment"</div>
                    <div>)</div>
                    <div class="mt-4 text-slate-500"># CHECK assessment</div>
                    <div>logger.add_checkpoint(</div>
                    <div class="ml-4">phase="CHECK",</div>
                    <div class="ml-4">vectors={"{"}{"'"}know{"'"}: 0.7, {"'"}uncertainty{"'"}: 0.3, ...{"}"},</div>
                    <div class="ml-4">metadata={"{"}{"'"}decision{"'"}: "proceed"{"}"}</div>
                    <div>)</div>
                    <div class="mt-4 text-slate-500"># POSTFLIGHT assessment</div>
                    <div>logger.add_checkpoint(</div>
                    <div class="ml-4">phase="POSTFLIGHT",</div>
                    <div class="ml-4">vectors={"{"}{"'"}know{"'"}: 0.85, {"'"}uncertainty{"'"}: 0.15, ...{"}"},</div>
                    <div class="ml-4">reasoning="Task complete, knowledge gained"</div>
                    <div>)</div>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-semibold text-white mb-3">Core Modules</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚Ä¢</span>
                                <span><code class="text-xs">SessionDatabase</code> - Session management</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚Ä¢</span>
                                <span><code class="text-xs">GitEnhancedReflexLogger</code> - CASCADE tracking</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚Ä¢</span>
                                <span><code class="text-xs">CheckpointManager</code> - Git checkpoints</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚Ä¢</span>
                                <span><code class="text-xs">MirrorDriftMonitor</code> - Drift detection</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚Ä¢</span>
                                <span><code class="text-xs">GoalTreeManager</code> - Goal tracking</span>
                            </li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-semibold text-white mb-3">Use Cases</h4>
                        <ul class="space-y-2 text-sm text-slate-300">
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚úì</span>
                                <span>Custom applications</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚úì</span>
                                <span>Research experiments</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚úì</span>
                                <span>Training data generation</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚úì</span>
                                <span>System integration</span>
                            </li>
                            <li class="flex items-start">
                                <span class="text-green-600 mr-2">‚úì</span>
                                <span>Custom workflows</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-l-4 border-green-600 p-6 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">API Reference</h4>
                <p class="text-green-800 mb-4">
                    Complete Python API documentation with class references, method signatures, and examples
                </p>
                <a href="/developers/api-reference.html" class="text-green-600 hover:text-green-700 font-semibold">
                    View API Documentation ‚Üí
                </a>
            </div>
        </div>
    </section>

    <!-- Architecture Diagram -->
    <section class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-12 text-center">
                Unified Architecture
            </h2>

            <div class="bg-slate-900 rounded-xl p-8 mb-8">
                <img src="/assets/directory_structure.svg" 
                     alt="Empirica Directory Structure" 
                     class="w-full glass-card rounded-lg p-6" />
                <p class="text-sm text-slate-400 text-center mt-4 italic">
                    Modular architecture: CLI, MCP, and Python API all use the same core components
                </p>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <div class=" rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Shared Core</h3>
                    <p class="text-slate-300 text-sm mb-4">
                        All integrations use identical:
                    </p>
                    <ul class="text-sm text-slate-400 space-y-1">
                        <li>‚Ä¢ CASCADE workflow</li>
                        <li>‚Ä¢ 13-vector system</li>
                        <li>‚Ä¢ Triple storage</li>
                        <li>‚Ä¢ Git checkpoints</li>
                    </ul>
                </div>

                <div class=" rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Data Portability</h3>
                    <p class="text-slate-300 text-sm mb-4">
                        Sessions are fully portable:
                    </p>
                    <ul class="text-sm text-slate-400 space-y-1">
                        <li>‚Ä¢ Start in CLI</li>
                        <li>‚Ä¢ Continue in Claude</li>
                        <li>‚Ä¢ Query via Python</li>
                        <li>‚Ä¢ Same session, any interface</li>
                    </ul>
                </div>

                <div class=" rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Git-Native</h3>
                    <p class="text-slate-300 text-sm mb-4">
                        All state in Git notes:
                    </p>
                    <ul class="text-sm text-slate-400 space-y-1">
                        <li>‚Ä¢ No external database</li>
                        <li>‚Ä¢ Survives clones</li>
                        <li>‚Ä¢ Full audit trail</li>
                        <li>‚Ä¢ Verifiable integrity</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Getting Started -->
    <section class="py-20 text-white">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold mb-6">
                Choose Your Integration
            </h2>
            <p class="text-xl mb-8 text-white/90">
                Get started with CLI, MCP, or Python API
            </p>
            <div class="grid md:grid-cols-3 gap-4">
                <a href="/developers/cli-interface.html"
                    class="glass-card text-emerald-600 px-6 py-4 rounded-lg font-semibold hover:bg-slate-100 transition-all">
                    CLI Guide
                </a>
                <a href="/mcp-integration.html"
                    class="glass-card text-teal-600 px-6 py-4 rounded-lg font-semibold hover:bg-slate-100 transition-all">
                    MCP Setup
                </a>
                <a href="/developers/api-reference.html"
                    class="glass-card text-cyan-600 px-6 py-4 rounded-lg font-semibold hover:bg-slate-100 transition-all">
                    API Docs
                </a>
            </div>
        </div>
    </section>
    <Footer slot="footer" />
</BaseLayout>
