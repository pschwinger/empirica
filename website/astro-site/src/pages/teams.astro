---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
---

<BaseLayout title="Multi-Agent Teams | Empirica">
    <Header slot="header" />
    <Navigation slot="navigation" />
    <!-- Hero Section -->
    <section class=" text-white py-20">
        <div class="max-w-5xl mx-auto px-6">
            <h1 class="text-5xl font-bold mb-6">
                Multi-Agent Collaboration
            </h1>
            <p class="text-2xl text-cyan-200 mb-8">
                Epistemic handoffs that preserve context and track coordination complexity
            </p>
            <p class="text-lg text-slate-300 max-w-3xl">
                Empirica enables seamless handoffs between AI agents with three handoff patterns: Investigation (PREFLIGHT → CHECK), Complete (PREFLIGHT → POSTFLIGHT), and Planning (documentation-only). Each preserves epistemic state through Git, achieving 98.8% token reduction.
            </p>
        </div>
    </section>

    <!-- Three Handoff Types -->
    <section class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-12 text-center">
                Three Handoff Patterns
            </h2>

            <div class="space-y-8">
                <!-- Investigation Handoff -->
                <div class="bg-gradient-to-br from-indigo-50 to-cyan-50 rounded-xl  p-8 border-l-4 border-indigo-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-4">
                            1
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-white">Investigation Handoff</h3>
                            <p class="text-slate-400">PREFLIGHT → CHECK (Specialist pattern)</p>
                        </div>
                    </div>

                    <p class="text-slate-300 mb-6">
                        <strong>Use case:</strong> One agent investigates, another executes. Perfect for specialist handoffs where investigation expertise differs from implementation expertise.
                    </p>

                    <div class="glass-card rounded-lg p-6 mb-4">
                        <h4 class="font-semibold text-white mb-3">Workflow:</h4>
                        <div class="space-y-2 font-mono text-sm text-slate-300">
                            <div><span class="text-indigo-600">AI-1 (Investigator):</span></div>
                            <div class="ml-4">→ PREFLIGHT assessment</div>
                            <div class="ml-4">→ Investigate domain</div>
                            <div class="ml-4">→ CHECK (confirm readiness)</div>
                            <div class="ml-4">→ Create handoff report</div>
                            <div class="mt-3"><span class="text-cyan-600">AI-2 (Executor):</span></div>
                            <div class="ml-4">→ Query handoff (get findings/unknowns)</div>
                            <div class="ml-4">→ ACT (implement solution)</div>
                            <div class="ml-4">→ POSTFLIGHT (validate results)</div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-indigo-50 rounded-lg p-4">
                            <h5 class="font-semibold text-indigo-900 mb-2">Example Scenarios</h5>
                            <ul class="text-sm text-indigo-800 space-y-1">
                                <li>• Architecture review → Implementation</li>
                                <li>• Security audit → Remediation</li>
                                <li>• Code exploration → Refactoring</li>
                            </ul>
                        </div>
                        <div class="bg-cyan-50 rounded-lg p-4">
                            <h5 class="font-semibold text-cyan-900 mb-2">Epistemic Delta</h5>
                            <p class="text-sm text-cyan-800">
                                PREFLIGHT → CHECK learning (investigation phase knowledge transferred)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Complete Handoff -->
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl  p-8 border-l-4 border-green-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-4">
                            2
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-white">Complete Handoff</h3>
                            <p class="text-slate-400">PREFLIGHT → POSTFLIGHT (Full cycle)</p>
                        </div>
                    </div>

                    <p class="text-slate-300 mb-6">
                        <strong>Use case:</strong> One agent completes entire workflow, hands off clean context to next agent. Standard pattern for sequential work.
                    </p>

                    <div class="glass-card rounded-lg p-6 mb-4">
                        <h4 class="font-semibold text-white mb-3">Workflow:</h4>
                        <div class="space-y-2 font-mono text-sm text-slate-300">
                            <div><span class="text-green-600">AI-1:</span></div>
                            <div class="ml-4">→ PREFLIGHT → Work → POSTFLIGHT</div>
                            <div class="ml-4">→ Create handoff (with calibration data)</div>
                            <div class="mt-3"><span class="text-emerald-600">AI-2:</span></div>
                            <div class="ml-4">→ Query handoff</div>
                            <div class="ml-4">→ Start new work with full context</div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-green-50 rounded-lg p-4">
                            <h5 class="font-semibold text-green-900 mb-2">Example Scenarios</h5>
                            <ul class="text-sm text-green-800 space-y-1">
                                <li>• Feature implementation complete</li>
                                <li>• Bug fix verified</li>
                                <li>• Documentation updated</li>
                            </ul>
                        </div>
                        <div class="bg-emerald-50 rounded-lg p-4">
                            <h5 class="font-semibold text-emerald-900 mb-2">Epistemic Delta</h5>
                            <p class="text-sm text-emerald-800">
                                PREFLIGHT → POSTFLIGHT (full learning cycle + calibration)
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Planning Handoff -->
                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl  p-8 border-l-4 border-purple-600">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-4">
                            3
                        </div>
                        <div>
                            <h3 class="text-2xl font-bold text-white">Planning Handoff</h3>
                            <p class="text-slate-400">No assessments (Documentation-only)</p>
                        </div>
                    </div>

                    <p class="text-slate-300 mb-6">
                        <strong>Use case:</strong> Share context without formal CASCADE workflow. Lightweight coordination for planning and design.
                    </p>

                    <div class="glass-card rounded-lg p-6 mb-4">
                        <h4 class="font-semibold text-white mb-3">Workflow:</h4>
                        <div class="space-y-2 font-mono text-sm text-slate-300">
                            <div>empirica handoff-create --planning-only \</div>
                            <div class="ml-4">--session-id <span class="text-purple-600">&lt;ID&gt;</span> \</div>
                            <div class="ml-4">--task-summary "Planning completed" \</div>
                            <div class="ml-4">--key-findings '[...]' \</div>
                            <div class="ml-4">--next-session-context "Implementation ready"</div>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        <div class="bg-purple-50 rounded-lg p-4">
                            <h5 class="font-semibold text-purple-900 mb-2">Example Scenarios</h5>
                            <ul class="text-sm text-purple-800 space-y-1">
                                <li>• Planning documents</li>
                                <li>• Design decisions</li>
                                <li>• Meeting notes</li>
                            </ul>
                        </div>
                        <div class="bg-pink-50 rounded-lg p-4">
                            <h5 class="font-semibold text-pink-900 mb-2">Epistemic Delta</h5>
                            <p class="text-sm text-pink-800">
                                None (pure context sharing, no epistemic tracking)
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Goal Discovery -->
    <section class="py-20 ">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-6">
                Goal Discovery & Resumption
            </h2>
            <p class="text-xl text-slate-400 mb-12">
                Any AI can discover and continue another AI's work
            </p>

            <div class="glass-card rounded-xl  p-8 mb-8">
                <h3 class="text-2xl font-bold text-white mb-4">Discover Goals via Git</h3>
                <p class="text-slate-300 mb-6">
                    Goals are stored in Git notes, making them discoverable by any agent with repository access:
                </p>

                <div class="bg-slate-900 text-slate-300 rounded-lg p-6 font-mono text-sm mb-6">
                    <div class="mb-2 text-cyan-400"># Discover goals from other AIs</div>
                    <div>empirica goals-discover</div>
                    <div class="ml-4 text-slate-500"># Shows all goals in Git notes</div>
                    <div class="mt-4 mb-2 text-cyan-400"># Resume another AI's goal</div>
                    <div>empirica goals-resume --goal-id <span class="text-green-400">&lt;UUID&gt;</span> --ai-id <span class="text-purple-400">your-ai-id</span></div>
                    <div class="ml-4 text-slate-500"># Loads context + findings + unknowns</div>
                </div>

                <div class="bg-indigo-50 border-l-4 border-indigo-600 p-6 rounded-lg">
                    <h4 class="font-semibold text-indigo-900 mb-2">What you get:</h4>
                    <ul class="space-y-2 text-indigo-800">
                        <li>• <strong>Goal scope:</strong> Breadth, duration, coordination vectors</li>
                        <li>• <strong>Subtasks:</strong> What's done, what's pending</li>
                        <li>• <strong>Findings:</strong> Validated knowledge from investigation</li>
                        <li>• <strong>Unknowns:</strong> What still needs investigation (breadcrumbs!)</li>
                        <li>• <strong>Dead ends:</strong> Approaches that didn't work</li>
                    </ul>
                </div>
            </div>

            <div class="bg-slate-900 rounded-xl p-8">
                <img src="/assets/multi_ai_collaboration.svg" 
                     alt="Multi-AI Collaboration Timeline" 
                     class="w-full glass-card rounded-lg p-6" />
                <p class="text-sm text-slate-400 text-center mt-4 italic">
                    Cross-provider handoffs with epistemic growth tracking (Claude → GPT-4 → Gemini)
                </p>
            </div>
        </div>
    </section>

    <!-- Coordination Scope -->
    <section class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-6">
                Scope Vectors for Coordination
            </h2>
            <p class="text-xl text-slate-400 mb-12">
                Explicitly track collaboration complexity when creating goals
            </p>

            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Breadth</h3>
                    <div class="text-3xl font-bold text-blue-600 mb-2">0.0 - 1.0</div>
                    <p class="text-sm text-slate-300 mb-4">
                        How wide does the work span?
                    </p>
                    <ul class="text-xs text-slate-400 space-y-1">
                        <li>• 0.0 = Single function</li>
                        <li>• 0.5 = Multiple modules</li>
                        <li>• 1.0 = Entire codebase</li>
                    </ul>
                </div>

                <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Duration</h3>
                    <div class="text-3xl font-bold text-purple-600 mb-2">0.0 - 1.0</div>
                    <p class="text-sm text-slate-300 mb-4">
                        How long will this take?
                    </p>
                    <ul class="text-xs text-slate-400 space-y-1">
                        <li>• 0.0 = Minutes/hours</li>
                        <li>• 0.5 = Days</li>
                        <li>• 1.0 = Weeks/months</li>
                    </ul>
                </div>

                <div class="bg-gradient-to-br from-cyan-50 to-teal-50 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-3">Coordination</h3>
                    <div class="text-3xl font-bold text-cyan-600 mb-2">0.0 - 1.0</div>
                    <p class="text-sm text-slate-300 mb-4">
                        How much collaboration needed?
                    </p>
                    <ul class="text-xs text-slate-400 space-y-1">
                        <li>• 0.0 = Solo work</li>
                        <li>• 0.5 = Moderate handoffs</li>
                        <li>• 1.0 = Heavy orchestration</li>
                    </ul>
                </div>
            </div>

            <div class="mt-8 bg-slate-900 text-slate-300 rounded-xl p-6 font-mono text-sm">
                <div class="mb-2 text-cyan-400"># Create goal with coordination scope</div>
                <div>empirica goals-create \</div>
                <div class="ml-4">--session-id <span class="text-green-400">&lt;ID&gt;</span> \</div>
                <div class="ml-4">--objective "Build authentication system" \</div>
                <div class="ml-4">--scope-breadth <span class="text-purple-400">0.4</span> \</div>
                <div class="ml-4">--scope-duration <span class="text-purple-400">0.3</span> \</div>
                <div class="ml-4">--scope-coordination <span class="text-purple-400">0.6</span>  <span class="text-slate-500"># Moderate collaboration</span></div>
            </div>
        </div>
    </section>

    <!-- Token Efficiency -->
    <section class="py-20 ">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-6">
                98.8% Token Reduction
            </h2>
            <p class="text-xl text-slate-400 mb-12">
                Handoff reports achieve massive compression through Git checkpoints
            </p>

            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="glass-card rounded-xl  p-6 text-center">
                    <div class="text-4xl font-bold text-red-600 mb-2">~20,000</div>
                    <div class="text-sm text-slate-400 mb-4">Tokens (Baseline)</div>
                    <p class="text-xs text-slate-500">Full conversation history + context</p>
                </div>

                <div class="glass-card rounded-xl  p-6 text-center">
                    <div class="text-4xl font-bold text-amber-600 mb-2">~2,600</div>
                    <div class="text-sm text-slate-400 mb-4">Tokens (Git checkpoint)</div>
                    <p class="text-xs text-slate-500">Compressed epistemic state (87% reduction)</p>
                </div>

                <div class="glass-card rounded-xl  p-6 text-center">
                    <div class="text-4xl font-bold text-green-600 mb-2">~238</div>
                    <div class="text-sm text-slate-400 mb-4">Tokens (Handoff report)</div>
                    <p class="text-xs text-slate-500">Key findings + unknowns only (98.8% reduction)</p>
                </div>
            </div>

            <div class="bg-gradient-to-br from-green-50 to-emerald-50 border-l-4 border-green-600 p-6 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">How it works:</h4>
                <ul class="space-y-2 text-green-800">
                    <li>• <strong>Checkpoints:</strong> Store only epistemic vectors (~200 bytes) in Git notes</li>
                    <li>• <strong>Handoffs:</strong> Extract key findings + unknowns from goal tree</li>
                    <li>• <strong>Context:</strong> Next AI queries for breadcrumbs, not full history</li>
                    <li>• <strong>Validation:</strong> Git SHA ensures integrity across handoffs</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Git Integration -->
    <section class="py-20 glass-card">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold text-white mb-12 text-center">
                Git-Native Coordination
            </h2>

            <div class="bg-slate-900 rounded-xl p-8 mb-8">
                <img src="/assets/git_integration_flow.svg" 
                     alt="Git Integration Flow" 
                     class="w-full glass-card rounded-lg p-6" />
                <p class="text-sm text-slate-400 text-center mt-4 italic">
                    How epistemic state travels with code through Git
                </p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class=" rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">Goals in Git Notes</h3>
                    <p class="text-slate-300 mb-4">
                        Stored at <code class="bg-slate-900 text-cyan-400 px-2 py-1 rounded">refs/notes/empirica/goals</code>
                    </p>
                    <ul class="text-sm text-slate-400 space-y-2">
                        <li>• Discoverable by any agent</li>
                        <li>• Version-controlled with code</li>
                        <li>• Survives repository clones</li>
                        <li>• No external database needed</li>
                    </ul>
                </div>

                <div class=" rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">Handoffs in Git Notes</h3>
                    <p class="text-slate-300 mb-4">
                        Stored at <code class="bg-slate-900 text-cyan-400 px-2 py-1 rounded">refs/notes/empirica/handoff</code>
                    </p>
                    <ul class="text-sm text-slate-400 space-y-2">
                        <li>• Queryable by AI ID or session ID</li>
                        <li>• Includes epistemic deltas</li>
                        <li>• Compressed for efficiency</li>
                        <li>• Automatic cleanup (configurable)</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Use Cases -->
    <section class="py-20 text-white">
        <div class="max-w-5xl mx-auto px-6">
            <h2 class="text-4xl font-bold mb-12 text-center">
                Real-World Coordination Patterns
            </h2>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="glass-card/10 backdrop-blur rounded-xl p-6 border border-white/20">
                    <h3 class="text-xl font-bold mb-3">Security + Implementation Team</h3>
                    <p class="text-slate-200 text-sm mb-4">
                        Security specialist audits, hands off findings to implementation team
                    </p>
                    <div class="text-xs text-slate-300 space-y-1">
                        <div>1. Security AI: PREFLIGHT → Audit → CHECK</div>
                        <div>2. Create investigation handoff</div>
                        <div>3. Dev AI: Query handoff → ACT → POSTFLIGHT</div>
                    </div>
                </div>

                <div class="glass-card/10 backdrop-blur rounded-xl p-6 border border-white/20">
                    <h3 class="text-xl font-bold mb-3">Cross-Provider Collaboration</h3>
                    <p class="text-slate-200 text-sm mb-4">
                        Claude explores, GPT-4 refactors, Gemini validates
                    </p>
                    <div class="text-xs text-slate-300 space-y-1">
                        <div>1. Claude: Investigation + handoff</div>
                        <div>2. GPT-4: Query + implement + handoff</div>
                        <div>3. Gemini: Query + validate + complete</div>
                    </div>
                </div>

                <div class="glass-card/10 backdrop-blur rounded-xl p-6 border border-white/20">
                    <h3 class="text-xl font-bold mb-3">Specialist Pipeline</h3>
                    <p class="text-slate-200 text-sm mb-4">
                        Architecture → Backend → Frontend → Testing
                    </p>
                    <div class="text-xs text-slate-300 space-y-1">
                        <div>Each specialist: Query previous → Work → Handoff next</div>
                        <div>Full epistemic chain preserved in Git</div>
                    </div>
                </div>

                <div class="glass-card/10 backdrop-blur rounded-xl p-6 border border-white/20">
                    <h3 class="text-xl font-bold mb-3">24/7 Continuous Work</h3>
                    <p class="text-slate-200 text-sm mb-4">
                        Different AIs in different timezones continue work seamlessly
                    </p>
                    <div class="text-xs text-slate-300 space-y-1">
                        <div>1. AI-A (morning): Work + handoff</div>
                        <div>2. AI-B (afternoon): Resume + handoff</div>
                        <div>3. AI-C (night): Resume + complete</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="py-20 glass-card">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <h2 class="text-4xl font-bold text-white mb-6">
                Start Coordinating AI Teams
            </h2>
            <p class="text-xl text-slate-400 mb-8">
                Epistemic handoffs enable true multi-agent collaboration
            </p>
            <div class="flex gap-4 justify-center">
                <a href="/getting-started.html"
                    class="bg-gradient-to-r from-indigo-600 to-cyan-600 text-white px-8 py-4 rounded-lg font-semibold hover:from-indigo-700 hover:to-cyan-700 transition-all transform hover:scale-105">
                    Get Started
                </a>
                <a href="/how-it-works.html"
                    class="border-2 border-slate-300 text-slate-300 px-8 py-4 rounded-lg font-semibold hover: transition-all">
                    Learn CASCADE
                </a>
            </div>
        </div>
    </section>
    <Footer slot="footer" />
</BaseLayout>
